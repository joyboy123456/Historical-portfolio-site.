<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å†æ•°æ®è¿ç§»</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #333; margin-bottom: 10px; }
        .subtitle { color: #666; margin-bottom: 30px; }
        .step {
            margin: 25px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .step h2 {
            margin-top: 0;
            color: #444;
            font-size: 18px;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            transition: all 0.3s;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-primary:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }
        .result {
            margin: 15px 0;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .result.show { display: block; }
        .result.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .result.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .result.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            max-height: 200px;
            font-size: 12px;
        }
        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“‹ ç®€å†æ•°æ®è¿ç§»å·¥å…·</h1>
        <p class="subtitle">å°†æ—§æ ¼å¼æ•°æ®è¿ç§»åˆ°æ–°çš„ç»“æ„åŒ–æ ¼å¼</p>

        <div class="step">
            <h2>æ­¥éª¤ 1: æŸ¥çœ‹ç°æœ‰æ•°æ®</h2>
            <button class="btn-primary" onclick="loadData()">æŸ¥çœ‹å½“å‰æ•°æ®</button>
            <div id="loadResult" class="result"></div>
        </div>

        <div class="step">
            <h2>æ­¥éª¤ 2: åˆ é™¤æ—§æ•°æ®</h2>
            <div class="warning-box">
                âš ï¸ <strong>è­¦å‘Šï¼š</strong>æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®ï¼Œä¸å¯æ¢å¤ï¼
            </div>
            <button class="btn-danger" onclick="deleteData()">åˆ é™¤æ‰€æœ‰æ—§æ•°æ®</button>
            <div id="deleteResult" class="result"></div>
        </div>

        <div class="step">
            <h2>æ­¥éª¤ 3: åˆ›å»ºæ–°æ ¼å¼ç®€å†</h2>
            <p>å°†åˆ›å»ºä»¥ä¸‹æ¿å—ï¼š</p>
            <ul>
                <li>âœ“ ä¸ªäººä¿¡æ¯ï¼ˆå¤´åƒã€å§“åã€è”ç³»æ–¹å¼ï¼‰</li>
                <li>âœ“ å·¥ä½œç»å†</li>
                <li>âœ“ æ•™è‚²èƒŒæ™¯</li>
                <li>âœ“ æŠ€æœ¯æ ˆ</li>
                <li>âœ“ ä¸“ä¸šæŠ€èƒ½</li>
            </ul>
            <button class="btn-success" onclick="createData()">åˆ›å»ºå®Œæ•´ç®€å†</button>
            <div id="createResult" class="result"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabaseUrl = "https://jcxlgmmudtbizyinqyrq.supabase.co"
        const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpjeGxnbW11ZHRiaXp5aW5xeXJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2MTc3MzksImV4cCI6MjA3NzE5MzczOX0.SYmaIOEVhS5P-wJmlUoP_mhOlrhVQo7OaEZYbDGKuVg"
        
        const { createClient } = supabase
        const db = createClient(supabaseUrl, supabaseAnonKey)

        function showResult(id, html, type) {
            const el = document.getElementById(id)
            el.innerHTML = html
            el.className = 'result show ' + type
        }

        async function loadData() {
            try {
                showResult('loadResult', 'æ­£åœ¨åŠ è½½...', 'warning')
                const { data, error } = await db.from('resume_sections').select('*').order('created_at')
                if (error) throw error
                
                showResult('loadResult', `
                    <strong>æ‰¾åˆ° ${data.length} æ¡è®°å½•ï¼š</strong>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `, 'success')
            } catch (err) {
                showResult('loadResult', `âŒ åŠ è½½å¤±è´¥: ${err.message}`, 'error')
            }
        }

        async function deleteData() {
            if (!confirm('ç¡®å®šè¦åˆ é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼\n\nè¯·å†æ¬¡ç¡®è®¤ã€‚')) return
            
            try {
                showResult('deleteResult', 'æ­£åœ¨åˆ é™¤...', 'warning')
                const { error } = await db.from('resume_sections').delete().neq('id', '00000000-0000-0000-0000-000000000000')
                if (error) throw error
                
                showResult('deleteResult', 'âœ… æ‰€æœ‰æ—§æ•°æ®å·²åˆ é™¤', 'success')
            } catch (err) {
                showResult('deleteResult', `âŒ åˆ é™¤å¤±è´¥: ${err.message}`, 'error')
            }
        }

        async function createData() {
            try {
                showResult('createResult', 'æ­£åœ¨åˆ›å»ºæ–°æ•°æ®...', 'warning')
                
                const newData = [
                    {
                        section_type: 'profile',
                        title: 'ä¸ªäººä¿¡æ¯',
                        content: '{"name":"è´è´","title":"ç”µå•†è®¾è®¡å¸ˆ"}',
                        metadata: {
                            name: 'è´è´',
                            title: 'ç”µå•†è®¾è®¡å¸ˆ',
                            avatar_url: '',
                            bio: 'ä»ä¼ ç»Ÿå®¶çººè¡Œä¸šèµ·æ­¥ï¼Œæ·±åº¦å‚ä¸ç”µå•†æ•°å­—åŒ–è½¬å‹æµªæ½®ã€‚å¤šå¹´å®æˆ˜ç»éªŒæ¶µç›–å“ç‰Œè§†è§‰æ„å»ºã€äº§å“åŒ…è£…è®¾è®¡ã€ç”µå•†å…¨é“¾è·¯è§†è§‰è¥é”€ï¼Œæ“…é•¿å°†äº§å“ç‰¹æ€§è½¬åŒ–ä¸ºæ‰“åŠ¨æ¶ˆè´¹è€…çš„è§†è§‰è¯­è¨€ã€‚',
                            location: 'æ­å·',
                            email: 'boyj31639@gmail.com',
                            phone: '+86 138 0000 0000',
                            website: 'https://yourwebsite.com'
                        },
                        display_order: 1
                    },
                    {
                        section_type: 'work_experience',
                        title: 'å·¥ä½œç»å†',
                        content: '{"experiences":[]}',
                        metadata: {
                            experiences: [{
                                company: 'ABCç”µå•†å…¬å¸',
                                position: 'é«˜çº§ç”µå•†è®¾è®¡å¸ˆ',
                                start_date: '2020-01',
                                end_date: '',
                                current: true,
                                description: 'è´Ÿè´£ç”µå•†å¹³å°è§†è§‰è®¾è®¡ï¼ŒåŒ…æ‹¬äº§å“è¯¦æƒ…é¡µã€æ´»åŠ¨é¡µé¢ã€å“ç‰Œè§†è§‰ç­‰ã€‚æå‡è½¬åŒ–ç‡20%ï¼Œå®Œæˆå¤šä¸ªçˆ†æ¬¾äº§å“çš„è§†è§‰è®¾è®¡ã€‚'
                            }]
                        },
                        display_order: 2
                    },
                    {
                        section_type: 'education',
                        title: 'æ•™è‚²èƒŒæ™¯',
                        content: '{"education":[]}',
                        metadata: {
                            education: [{
                                school: 'æŸæŸå¤§å­¦',
                                degree: 'æœ¬ç§‘',
                                major: 'è§†è§‰ä¼ è¾¾è®¾è®¡',
                                start_date: '2015-09',
                                end_date: '2019-06',
                                current: false,
                                gpa: '3.8/4.0',
                                description: 'ä¸»ä¿®å¹³é¢è®¾è®¡ã€å“ç‰Œè®¾è®¡ã€æ•°å­—åª’ä½“è®¾è®¡ç­‰è¯¾ç¨‹'
                            }]
                        },
                        display_order: 3
                    },
                    {
                        section_type: 'tech_stack',
                        title: 'æŠ€æœ¯æ ˆ',
                        content: '{"stacks":[]}',
                        metadata: {
                            stacks: [
                                {
                                    category: 'è®¾è®¡å·¥å…·',
                                    technologies: [
                                        { name: 'Figma', level: 'expert' },
                                        { name: 'Sketch', level: 'advanced' },
                                        { name: 'Adobe Creative Suite', level: 'expert' }
                                    ]
                                },
                                {
                                    category: 'åŸå‹å·¥å…·',
                                    technologies: [
                                        { name: 'å¢¨åˆ€', level: 'advanced' },
                                        { name: 'Axure', level: 'intermediate' }
                                    ]
                                }
                            ]
                        },
                        display_order: 4
                    },
                    {
                        section_type: 'skills',
                        title: 'ä¸“ä¸šæŠ€èƒ½',
                        content: '{"skills":[]}',
                        metadata: {
                            skills: [
                                { name: 'ç”¨æˆ·ç•Œé¢è®¾è®¡', description: 'ç²¾é€šç”µå•†UIè®¾è®¡ï¼Œæ“…é•¿æå‡ç”¨æˆ·ä½“éªŒå’Œè½¬åŒ–ç‡' },
                                { name: 'ç”¨æˆ·ä½“éªŒè®¾è®¡', description: 'æ·±å…¥ç†è§£ç”¨æˆ·è¡Œä¸ºï¼Œä¼˜åŒ–è´­ç‰©æµç¨‹' },
                                { name: 'ç”µå•†è®¾è®¡', description: 'ç†Ÿæ‚‰ç”µå•†å…¨é“¾è·¯è®¾è®¡ï¼ŒåŒ…æ‹¬è¯¦æƒ…é¡µã€æ´»åŠ¨é¡µç­‰' },
                                { name: 'è®¾è®¡ç³»ç»Ÿ', description: 'å»ºç«‹å’Œç»´æŠ¤è®¾è®¡è§„èŒƒï¼Œæå‡å›¢é˜Ÿæ•ˆç‡' },
                                { name: 'å“ç‰Œè®¾è®¡', description: 'å“ç‰Œè§†è§‰è¯†åˆ«ç³»ç»Ÿè®¾è®¡ä¸åº”ç”¨' }
                            ]
                        },
                        display_order: 5
                    }
                ]
                
                const { data, error } = await db.from('resume_sections').insert(newData).select()
                if (error) throw error
                
                showResult('createResult', `
                    <strong>âœ… æˆåŠŸåˆ›å»º ${data.length} ä¸ªç®€å†æ¿å—ï¼</strong>
                    <ul style="margin: 15px 0;">
                        <li>âœ“ ä¸ªäººä¿¡æ¯</li>
                        <li>âœ“ å·¥ä½œç»å†</li>
                        <li>âœ“ æ•™è‚²èƒŒæ™¯</li>
                        <li>âœ“ æŠ€æœ¯æ ˆ</li>
                        <li>âœ“ ä¸“ä¸šæŠ€èƒ½</li>
                    </ul>
                    <p><strong>ğŸ‰ è¿ç§»å®Œæˆï¼</strong>ç°åœ¨å¯ä»¥å›åˆ°<a href="/" style="color: #007bff;">ç®¡ç†åå°</a>æŸ¥çœ‹å’Œç¼–è¾‘äº†ã€‚</p>
                `, 'success')
            } catch (err) {
                showResult('createResult', `âŒ åˆ›å»ºå¤±è´¥: ${err.message}`, 'error')
            }
        }
    </script>
</body>
</html>
